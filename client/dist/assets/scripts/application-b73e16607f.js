!function(e){"use strict";function t(){function e(e){var n=[];return e.$dependencies&&e.$dependencies.forEach(function(e){n.push(t.getInstance(e))}),n.forEach(function(t){e=e.bind(this,t)}),new e}var t=this,n={};t.registerSingleton=function(e,t){if(n.hasOwnProperty(e))throw new Error('The dependency "'+e+'" is already registered.');"object"==typeof t?n[e]={constructor:void 0,instance:t}:n[e]={constructor:t,instance:void 0}},t.resolve=function(e,n){var o=[];e.forEach(function(e){o.push(t.getInstance(e))}),n.apply(this,o)},t.getInstance=function(t){var o=n[t];if(void 0===o)throw new Error('Unknown dependency "'+t+'".');return o.instance||(o.instance=e(o.constructor)),o.instance}}e.iocClass=t,e.ioc=new t}(window),function(e,t){"use strict";function n(e){var n=this,o=[];t.prototype.constructor.call(n),n.addChangeListener=function(e){n.on("change",e)},n.removeChangeListener=function(e){n.removeListener("change",e)},n.getTodoItems=function(){return o},e.on("addTodoItem",function(e){o.push({value:e.text}),n.emit("change")})}e.registerSingleton("TodoStore",n),n.$dependencies=["EventPublisher"],n.prototype=Object.create(t.prototype),n.prototype.constructor=t,n.prototype.baseClass=t.prototype}(ioc,EventEmitter),function(e){"use strict";function t(e){var t=this;t.addTodo=function(t){e.publish({name:"addTodoItem",text:t})}}e.registerSingleton("TodoActions",t),t.$dependencies=["EventPublisher"]}(ioc),function(e){"use strict";function t(){function e(e){n.eventRegistry[e.name].forEach(function(t){t(e)})}function t(e,t){void 0===n.eventRegistry[e]&&(n.eventRegistry[e]=[]),n.eventRegistry[e].push(t)}var n=this;return n.eventRegistry={},{publish:e,on:t}}e.registerSingleton("EventPublisher",t)}(ioc),function(e,t){"use strict";function n(t){function n(e){return{value:e}}var o={};return o.getInitialState=function(){return n()},o.render=function(){return e.createElement("div",null,e.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange}),e.createElement("button",{type:"button",onClick:this.addToCart},"Add"))},o.addToCart=function(){t.addTodo(this.state.value)},o.handleChange=function(e){this.setState(n(e.target.value.substr(0,140)))},e.createClass(o)}t.registerSingleton("TodoAdd",n),n.$dependencies=["TodoActions"]}(React,ioc),function(e,t){"use strict";function n(t,n){var o={};return o.render=function(){return e.createElement("div",null,e.createElement(n,null),e.createElement(t,null))},e.createClass(o)}t.registerSingleton("TodoApp",n),n.$dependencies=["TodoList","TodoAdd"]}(React,ioc),function(e,t){"use strict";function n(t){function n(){return{todoItems:t.getTodoItems()}}var o={getInitialState:function(){return n()},componentDidMount:function(){t.addChangeListener(this.onChange)},componentWillUnmount:function(){t.removeChangeListener(this.onChange)},render:function(){return e.createElement("div",null,this.state.todoItems.map(function(t){return e.createElement("li",null,t.value)}))},onChange:function(){this.setState(n())}};return e.createClass(o)}t.registerSingleton("TodoList",n),n.$dependencies=["TodoStore"]}(React,ioc),function(e,t){"use strict";t.resolve(["TodoApp"],function(t){e.render(e.createElement(t,null),document.getElementById("root"))})}(React,ioc);